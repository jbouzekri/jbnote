<div class="page-header">
  <h1>Installation</h1>
</div>


<mat-sidenav-container>
  <mat-sidenav #sidenav mode="over" position="end">
    Jolly good!
  </mat-sidenav>

  <!-- stepper -->
  <mat-horizontal-stepper linear="true" #stepper>
    <!-- activate step -->
    <mat-step #stepEnableSync label="Activate" [stepControl]="enableSyncFormControl">
      <mat-card>
        <p class="text-row">
          Do you want to enable sync between devices ?<br />
          <br />
          You will need a Google account with the Firebase service enabled (the free plan is good enough for this app).<br />
          <br />
          <small>(You can enable synchronization later)</small>
        </p>

        <div class="button-row">
          <button type="button" mat-raised-button color="primary" (click)="enableSync()">Yes I want !</button>
          <button type="button" mat-raised-button color="warn" (click)="disableSync()">No I don't want to</button>
        </div>
      </mat-card>
    </mat-step>
    <!-- /activate step -->

    <!-- configure step -->
    <mat-step #stepConfigSync label="Configure" [stepControl]="configForm">
      <mat-card>
        <form [formGroup]="configForm" (ngSubmit)="onSubmit()" novalidate class="app-form app-form--install">
          <!-- apikey field -->
          <mat-form-field>
            <input matInput placeholder="apiKey" [formControl]="apiKey">
            <mat-hint align="start">apiKey is an alphanumerical string with dashes</mat-hint>
            <mat-error *ngIf="apiKey.hasError('pattern')">
              Please enter a valid apiKey
            </mat-error>
            <mat-error *ngIf="apiKey.hasError('required')">
              apiKey is <strong>required</strong>
            </mat-error>
          </mat-form-field>
          <!-- /apikey field -->

          <!-- authDomain field -->
          <mat-form-field>
            <input matInput placeholder="authDomain" [formControl]="authDomain">
            <mat-hint align="start">authDomain follows this format : <strong>somekey-98712.firebaseapp.com</strong></mat-hint>
            <mat-error *ngIf="authDomain.hasError('pattern')">
              Please enter a valid authDomain
            </mat-error>
            <mat-error *ngIf="authDomain.hasError('required')">
              authDomain is <strong>required</strong>
            </mat-error>
          </mat-form-field>
          <!-- /authDomain field -->

          <!-- databaseURL field -->
          <mat-form-field>
            <input matInput placeholder="databaseURL" [formControl]="databaseURL">
            <mat-hint align="start">databaseURL follows this format : <strong>https://somekey-87641.firebaseio.com</strong></mat-hint>
            <mat-error *ngIf="databaseURL.hasError('pattern')">
              Please enter a valid databaseURL
            </mat-error>
            <mat-error *ngIf="databaseURL.hasError('required')">
              databaseURL is <strong>required</strong>
            </mat-error>
          </mat-form-field>
          <!-- /databaseURL field -->

          <!-- storageBucket field -->
          <mat-form-field style="margin-bottom: 1em;">
            <input matInput placeholder="storageBucket" [formControl]="storageBucket">
            <mat-hint align="start">storageBucket follows this format : <strong>somekey-03257.appspot.com</strong></mat-hint>
            <mat-error *ngIf="storageBucket.hasError('pattern')">
              Please enter a valid storageBucket
            </mat-error>
            <mat-error *ngIf="storageBucket.hasError('required')">
              storageBucket is <strong>required</strong>
            </mat-error>
          </mat-form-field>
          <!-- /storageBucket field -->

          <!-- enableAuth field -->
          <mat-slide-toggle [formControl]="enableAuth" color="primary">
            Enable Firebase user auth
          </mat-slide-toggle>
          <!-- /enableAuth field -->

          <!-- username field -->
          <mat-form-field *ngIf="enableAuth.value">
            <input matInput placeholder="Username" [formControl]="username">
            <mat-error *ngIf="username.hasError('required')">
              username is <strong>required</strong>
            </mat-error>
          </mat-form-field>
          <!-- /username field -->

          <!-- password field -->
          <mat-form-field *ngIf="enableAuth.value">
            <input matInput placeholder="Password" [formControl]="password">
            <mat-error *ngIf="password.hasError('required')">
              password is <strong>required</strong>
            </mat-error>
          </mat-form-field>
          <!-- /password field -->

          <div class="app-form-buttons">
            <button mat-raised-button color="primary" type="submit" [disabled]="!configForm.valid">Save</button>
            <button mat-raised-button color="accent" type="reset" (click)="configForm.reset()">Reset</button>
            <button mat-raised-button type="button" (click)="stepper.previous()" class="app-form-buttons--right">Back</button>
          </div>
        </form>
      </mat-card>
    </mat-step>
    <!-- /configure step -->

    <!-- done step -->
    <mat-step label="Done">
      Synchronization configuration is finished. You are going to be redirected to the note app shortly ...
    </mat-step>
    <!-- /done step -->
  </mat-horizontal-stepper>
  <!-- /stepper -->
</mat-sidenav-container>

<button id="open-help" type="button" mat-fab color="warn" (click)="sidenav.toggle()" title="Open sidebar help window describing how to get firebase settings">
  <mat-icon class="md-24" aria-label="Help icon">help</mat-icon>
</button>
